<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="assets/img/Tinylogo.PNG" type="image/png">
    <title>‡∏£‡∏∞‡∏ö‡∏≤‡∏¢</title>
    <link rel="stylesheet" href="common/common.css" />
    <style>
        @font-face {
            font-family: 'TorsilpChillChill';
            src: url('assets/TORSILPCHILLCHILL.TTF') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        /* ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï html, body ‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô */
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            /* ‡∏ã‡πà‡∏≠‡∏ô scroll ‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å */
        }

        /* iFrame ‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
        #content-frame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            z-index: 1;
            /* ‡πÉ‡∏´‡πâ‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ iFrame */
        }
    </style>
</head>

<body>
    <div class="floating-menu hidden" id="myMenu">
        <ul>
            <li><a href="#" onclick="loadIframe('open.html')">‡πÄ‡∏Å‡∏£‡∏¥‡πà‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</a></li>
            <li><a href="#" onclick="loadIframe('content2.html')">‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤</a></li>
            <div class="has-submenu">
                <p onclick="toggleSubmenu(event)">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°<span class="arrow">‚ñº</span></p>
                <ul class="submenu">
                    <li><a href="#" onclick="loadIframe('Drawing.html')">üé® ‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ ‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏™‡∏µ </a></li>
                    <li><a href="#" onclick="loadIframe('Drawing.html#flower-animation')">üå∏ ‡∏à‡∏±‡∏î‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ </a></li>
                    <li><a href="#" onclick="loadIframe('Drawing.html#interactive-animation')">üí• ‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏™‡∏µ‡∏™‡∏±‡∏ô</a></li>
                    <li><a href="#" onclick="loadIframe('Drawing.html#line-animation')">üìù ‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å </a></li>
                </ul>
            </div>
            <p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</p>
            <li><a href="#" onclick="loadIframe('end.html')">‡∏õ‡∏¥‡∏î‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</a></li>
            <li><a href="#" onclick="loadIframe('end2.html')">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏¢‡∏µ‡∏¢‡∏ß‡∏¢‡∏≤‡∏à‡∏¥‡∏ï‡πÉ‡∏à‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</a></li>
            <li><a href="#" onclick="loadIframe('member.html')">‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥</a></li>
        </ul>
    </div>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏° (Hamburger ‡πÅ‡∏•‡∏∞ Sound) -->
    <div class="icon-buttons">
        <div class="circle-button" onclick="toggleMenu()">
            <img src="assets/img/menuicon.PNG" alt="Menu">
        </div>
        <div class="circle-button" onclick="toggleSound()">
            <img id="sound-icon" src="assets/img/soundofficon.PNG" alt="Sound">
        </div>
    </div>


    <!-- ‡πÄ‡∏û‡∏•‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á -->
    <audio id="background-music" src="assets/Jazz Music.mp3" loop></audio>

    <!-- iFrame ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏ô‡πâ‡∏≤ -->
    <iframe id="content-frame" src="open.html"></iframe>


    <script>

        let globalAudio;
        document.addEventListener("DOMContentLoaded", () => {
            globalAudio = document.getElementById("background-music");
            const soundIcon = document.getElementById("sound-icon");

            if (!globalAudio) return;

            // ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å localStorage
            const isPlaying = localStorage.getItem("isPlaying") || "false";
            const currentTime = localStorage.getItem("currentTime") || "0";

            globalAudio.currentTime = parseFloat(currentTime);

            if (isPlaying === "true") {
                globalAudio.play();
                soundIcon.src = 'assets/img/soundonicon.PNG';
            } else {
                soundIcon.src = 'assets/img/soundofficon.PNG';
            }

            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤
            window.addEventListener("beforeunload", () => {
                localStorage.setItem("isPlaying", !globalAudio.paused);
                localStorage.setItem("currentTime", globalAudio.currentTime);
            });
        });

        // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ iframe ‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
        function loadIframe(pageUrl) {
            document.getElementById("content-frame").src = pageUrl;
            const menu = document.getElementById('myMenu');
            if (!menu.classList.contains('hidden')) {
                toggleMenu();
            }
        }


        // ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏á
        function toggleSound() {
            const soundIcon = document.getElementById("sound-icon");
            if (!globalAudio) return;

            if (globalAudio.paused) {
                globalAudio.play();
                soundIcon.src = 'assets/img/soundonicon.PNG';
                localStorage.setItem("isPlaying", "true");
            } else {
                globalAudio.pause();
                soundIcon.src = 'assets/img/soundofficon.PNG';
                localStorage.setItem("isPlaying", "false");
            }
        }

        // ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π
        function toggleMenu() {
            const menu = document.getElementById('myMenu');
            menu.classList.toggle('hidden');
        }

        // ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π‡∏¢‡πà‡∏≠‡∏¢
        function toggleSubmenu(event) {
            const submenu = event.target.nextElementSibling;
            if (submenu && submenu.classList.contains("submenu")) {
                submenu.classList.toggle("hidden");
            }
        }

        if (!window.scriptLoaded) {
            window.scriptLoaded = true; // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏ã‡πâ‡∏≥

            document.addEventListener("DOMContentLoaded", function () {
                console.log("common.js loaded");

                // ‚úÖ Toggle Menu (‡πÅ‡∏Å‡πâ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ menu ‡πÉ‡∏ô main.html)
                window.toggleMenu = function () {
                    console.log("toggleMenu triggered");
                    const menu = document.getElementById('myMenu');
                    if (menu) {
                        menu.classList.toggle('hidden');
                    } else {
                        console.error("Element with id 'myMenu' not found.");
                    }
                };

                // ‚úÖ Toggle Submenu (‡πÅ‡∏Å‡πâ‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÄ‡∏°‡∏ô‡∏π‡∏¢‡πà‡∏≠‡∏¢‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á)
                window.toggleSubmenu = function (event) {
                    event.preventDefault();
                    const li = event.currentTarget.closest('.has-submenu');
                    if (li) {
                        li.classList.toggle('open');
                        const arrow = li.querySelector('.arrow');
                        if (arrow) {
                            arrow.textContent = li.classList.contains('open') ? '‚ñ≤' : '‚ñº';
                        }
                    }
                };

                // ‚úÖ ‡πÉ‡∏ä‡πâ <audio> ‡πÄ‡∏î‡∏¥‡∏°‡πÅ‡∏ó‡∏ô new Audio() ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ã‡πâ‡∏≥
                let globalAudio = document.getElementById("background-music");
                const soundIcon = document.getElementById("sound-icon");

                if (!globalAudio) {
                    console.error("Audio element not found. Ensure <audio id='background-music'> exists in main.html.");
                    return;
                }

                // ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å localStorage
                const isPlaying = localStorage.getItem("isPlaying") || "false";
                const currentTime = localStorage.getItem("currentTime") || "0";

                globalAudio.currentTime = parseFloat(currentTime);

                if (isPlaying === "true") {
                    globalAudio.play();
                    soundIcon.src = 'assets/img/soundonicon.PNG';
                } else {
                    soundIcon.src = 'assets/img/soundofficon.PNG';
                }

                // ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤
                window.addEventListener("beforeunload", function () {
                    localStorage.setItem("isPlaying", !globalAudio.paused);
                    localStorage.setItem("currentTime", globalAudio.currentTime);
                });

                // ‚úÖ Toggle Sound (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ globalAudio ‡πÄ‡∏î‡∏¥‡∏°)
                window.toggleSound = function () {
                    if (!globalAudio) return;
                    if (globalAudio.paused) {
                        globalAudio.play();
                        soundIcon.src = 'assets/img/soundonicon.PNG';
                        localStorage.setItem("isPlaying", "true");
                    } else {
                        globalAudio.pause();
                        soundIcon.src = 'assets/img/soundofficon.PNG';
                        localStorage.setItem("isPlaying", "false");
                    }
                };
            });
        }
    </script>
    <!-- <script src="common/common.js"></script> -->
</body>

</html>